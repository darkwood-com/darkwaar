{% extends 'shop/base.html.twig' %}

{% block body %}
<section id="settings" class="section container-fluid">
    <h3 class="box-title">Settings</h3>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success" role="alert">
            {{ message }}
        </div>
    {% endfor %}

    {{ form_start(form, {'attr': {'class': 'form-sm-horizontal'}}) }}
        {% if form_errors(form) %}
            <div class="alert alert-danger" role="alert">
                {{ form_errors(form) }}
            </div>
        {% endif %}

        <div class="row mb-3">
            <label for="settings-firstname" class="col-sm-2 col-form-label">Firstname</label>
            <div class="col-sm-10">
                {{ form_widget(form.customer.firstname, {
                    'attr': {
                        'class': 'form-control',
                        'id': 'settings-firstname',
                        'placeholder': 'Firstname'
                    }
                }) }}
                {% if form_errors(form.customer.firstname) %}
                    <div class="invalid-feedback d-block">
                        {{ form_errors(form.customer.firstname) }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="row mb-3">
            <label for="settings-lastname" class="col-sm-2 col-form-label">Lastname</label>
            <div class="col-sm-10">
                {{ form_widget(form.customer.lastname, {
                    'attr': {
                        'class': 'form-control',
                        'id': 'settings-lastname',
                        'placeholder': 'Lastname'
                    }
                }) }}
                {% if form_errors(form.customer.lastname) %}
                    <div class="invalid-feedback d-block">
                        {{ form_errors(form.customer.lastname) }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="row mb-3">
            <label for="settings-username" class="col-sm-2 col-form-label">Username</label>
            <div class="col-sm-10">
                {{ form_widget(form.username, {
                    'attr': {
                        'class': 'form-control',
                        'id': 'settings-username',
                        'placeholder': 'Username'
                    }
                }) }}
                {% if form_errors(form.username) %}
                    <div class="invalid-feedback d-block">
                        {{ form_errors(form.username) }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="row mb-3">
            <label for="settings-apiKeyGenerate" class="col-sm-2 col-form-label">Api key</label>
            <div class="col-sm-10">
                <div class="input-group">
                    {{ form_widget(form.apiKey, {
                        'attr': {
                            'class': 'form-control',
                            'id': 'settings-apiKeyGenerate',
                            'placeholder': 'API Key'
                        }
                    }) }}
                    <button type="button" class="input-group-text" id="generateApiKey">Generate</button>
                </div>
                {% if form_errors(form.apiKey) %}
                    <div class="invalid-feedback d-block">
                        {{ form_errors(form.apiKey) }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="row mb-3">
            <label for="settings-apiKey" class="col-sm-2 col-form-label">Api usage</label>
            <div class="col-sm-10">
                <div class="input-group">
                    <button type="button" class="input-group-text" id="copyApiUsage">
                        <twig:ux:icon name="mdi:clipboard" class="svg-inline--fa" />
                    </button>
                    <input
                        type="text"
                        class="form-control"
                        id="settings-apiKey"
                        value="{% if user.apiKey %}node -e &quot;$(curl -s https://uniflow.io/assets/node.js)&quot; - --api-key={{ user.apiKey }}{% endif %}"
                        readonly
                        placeholder="api key"
                    />
                </div>
            </div>
        </div>

        <div class="row mb-3">
            <div class="offset-sm-2 col-sm-10">
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    {{ form_end(form) }}
</section>
{% endblock %}
